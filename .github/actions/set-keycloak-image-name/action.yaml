name: Set Keycloak Image Name
description: Set the Keycloak image name based on the Keycloak version using the needs:read-build-image-output step.
author: Camunda
inputs:
  keycloak_version:
    description: Keycloak version
    required: true
  needs_build_image_output:
    description: JSON output of the result matrix reading from the build step
    required: true
outputs:
  keycloak_image_name:
    description: Keycloak image name
runs:
  using: "composite"
  steps:
    - name: Set Keycloak Image Name
      id: set-keycloak-image-name
      shell: bash
      run: |
        keycloak_image_name="${{ fromJson(need_build_image_output).full_image_name[inputs.keycloak_version] }}"
        echo "keycloak_image_name=${keycloak_image_name}" >> "$GITHUB_ENV"
        echo "keycloak_image_name=${keycloak_image_name}"
